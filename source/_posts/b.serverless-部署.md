---
title: 使用Serverless搭建Hexo
cover: 'https://cdn.jsdelivr.net/gh/mydracula/image@master/2020/9.5cafg6iopz00.png'
categories:
  - Hexo
  - 部署
tags:
  - Hexo
abbrlink: 2026
date: 2020-08-07 20:13:00
---



## 前言

通过使用[`Tencent Serverless Framework`](https://cloud.tencent.com/product/sls)，极速部署`Website`静态网站，支持丰富的配置扩展，如自定义域名和 CDN 加速等

{% note primary no-icon %}
本机环境：Window10、Node.js、Git
{% endnote %}
 
## 安装 Serverless

```
npm install -g serverless
```

## 安装 Hexo

```
npm install -g hexo-cli
hexo -v
```

## 初始化 Hexo

 
```
hexo init myblog    
cd myblog
npm install
```

初始化完成后，文件目录如下

{% note info  no-icon %}
.
├── _config.yml
├── package.json
├── scaffolds
├── source
│   ├── _drafts
│   └── _posts
└── themes
{% endnote %}


## 启动并预览 Hexo

```
hexo g
hexo serve
```

## 配置 yml文件

在`myblog`下新建`serverless.yml`


```
# serverless.yml

component: website # (必填) 引用 component 的名称，当前用到的是 tencent-website 组件
name: hexodemo # (必填) 该 website 组件创建的实例名称
org: test # (可选) 用于记录组织信息，默认值为您的腾讯云账号 APPID
app: websiteApp # (可选) 该 website 应用名称
stage: dev # (可选) 用于区分环境信息，默认值是 dev

inputs:
  src:
    src: ./public # Upload static files generated by HEXO
    index: index.html
    # dist: ./dist
    # hook: npm run build
    # websitePath: ./
  region: ap-guangzhou
  bucketName: my-bucket
  protocol: https
```

配置完成后，文件目录如下


{% note warning  no-icon %}
.
├── .serverless
└── hexo
    ├── public
    ├── ...
    ├── serverless.yml 
    ├── ...
    └── source
{% endnote %}



## 部署 Hexo

{% folding blue, 参考图片 %}

![](https://p.ananas.chaoxing.com/star3/origin/8a7199fbaab3c1d39c2e9cf19e28a745.jpg)

{% endfolding %}

```
sls deploy --debug
```



## 移除 Hexo

Serverless 应用：[点击](https://serverless.cloud.tencent.com)

```
sls remove --debug
```

## 账户配置

当前默认支持 CLI 扫描二维码登录

新建`.env`文件，可以配置持久的环境变量/密钥信息


```
# 腾讯云的配置信息
touch .env
```

在`.env`中配置腾讯云的`SecretId`和`SecretKey`

API 密钥管理：[点击](https://console.cloud.tencent.com/cam/capi)

```
# .env
TENCENT_SECRET_ID=123
TENCENT_SECRET_KEY=abc
```
## 自定义域名

自定义域名需要确保域名已经备案

{% note danger  no-icon %}
我没有备案域名，以后再更新
{% endnote %}


